<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layout/layout}">
<head th:replace="layout/header :: header">

<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
<title>Bootstrap 101 Template</title>

<!-- Bootstrap -->
<!-- <link rel="stylesheet"	href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css"/>
<script src="/webjars/jquery/3.2.1/jquery.min.js"></script>
<script src="/webjars/bootstrap/3.3.6/js/bootstrap.min.js"></script> -->
<script type="text/javascript">
	$(document)
			.ready(
					function() {

						var counter = 1;

						$("#addButton")
								.click(
										function() {

											if (counter > 10) {
												alert("Only 10 textboxes allow");
												return false;
											}

											var newTextBoxDiv = $(
													document
															.createElement('div'))
													.attr(
															"id",
															'TextBoxDiv'
																	+ counter);

											newTextBoxDiv
													.after()
													.html(
															'<div id="TextBoxDiv'+counter+'"><label >Address '
																	+ counter
																	+ ' : </label>'
																	+ '<input type="text" class="form-control" name="Address' + counter + 
	      '" id="Address' + counter + '" value="" >'
																	+ '<input type="button" value="Remove Button" id="removeButton'
																	+ counter
																	+ '" onclick="deleteControl('
																	+ counter
																	+ ')"></div><br>');

											newTextBoxDiv
													.appendTo("#TextBoxesGroup");

											counter++;
										});

						$("#getButtonValue").click(
								function() {

									var msg = '';
									for (i = 1; i < counter; i++) {
										msg += "\n Textbox #" + i + " : "
												+ $('#textbox' + i).val();
									}
									alert(msg);
								});

						$('#insert').submit(function(event) {
							// reference to form object
							var form = this;
							// for stopping the default action of element
							e.preventDefault();
							// mapthat will hold form data
							var formData = {}
							//iterate over form elements   
							$.each(this, function(i, v) {
								var input = $(v);
								// populate form data as key-value pairs
								// with the name of input as key and its value as value
								formData[input.attr("name")] = input.val();
							});
							alert(formData[input.attr("name")]);
							$.ajax({
								type : "POST", // method attribute of form
								url : $("#insert").attr("action"), // action attribute of form

								// convert form data to json format
								data : JSON.stringify(formData),

								success : function(response) {
									alert(response);
								},
								error : function(xhr, status, error) {
									alert(xhr.responseText);
								}
							});
							return false;
						});

					});

	function deleteControl(counter) {
		$("#TextBoxDiv" + counter).remove();
	}
</script>


</head>
<body>

	<div layout:fragment="content">
		<div class="container">
			<div class="col-md-6 col-md-offset-3">
				<form id="insert" action="/insert" method="post">

					<div class="form-group">
						<label for="FullName">FullName</label> <input type="text"
							class="form-control" name="FullName" placeholder="FullName">
					</div>

					<div class="form-group">
						<label for="FirstName">FirstName</label> <input type="text"
							class="form-control" name="FirstName" placeholder="FirstName">
					</div>

					<div class="form-group">
						<label for="LastName">LastName</label> <input type="text"
							class="form-control" name="LastName" placeholder="LastName">
					</div>

					<div class="form-group">
						<label for="ClassName">ClassName</label> <input type="text"
							class="form-control" name="ClassName" placeholder="ClassName">
					</div>

					<div class="form-group">
						<label for="Grade">Grade</label> <input type="text"
							class="form-control" name="Grade" placeholder="Grade">
					</div>
					<div id='TextBoxesGroup'></div>
					<div>
						<input type='button' value='Add Address' id='addButton'>
					</div>

					<br>

					<button type="submit" class="btn btn-default">create</button>
				</form>
			</div>
		</div>
	</div>

</body>
</html>